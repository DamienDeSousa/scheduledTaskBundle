parameters:
  dades_scheduled_task_bundle.fileLog: dades_scheduled_task_bundle.log
  dades_scheduled_task_bundle.scheduled_command_type.symfony: scheduled_symfony_command
  dades_scheduled_task_bundle.scheduled_command_type.console: scheduled_console_command

#  Class identifiers
  dades_scheduled_task_bundle.logger.class: Dades\ScheduledTaskBundle\Service\Logger
  dades_scheduled_task_bundle.console_command_service.class: Dades\ScheduledTaskBundle\Service\ScheduledConsoleCommandService
  dades_scheduled_task_bundle.run_command.class: Dades\ScheduledTaskBundle\Command\RunCronCommand
  dades_scheduled_task_bundle.scheduled_command_repository.class: Dades\ScheduledTaskBundle\Repository\ScheduledCommandRepository
  dades_scheduled_task_bundle.symfony_command_service.class: Dades\ScheduledTaskBundle\Service\ScheduledSymfonyCommandService

services:
  # Services
  dades_scheduled_task_bundle.logger:
    class: '%dades_scheduled_task_bundle.logger.class%'
    arguments:
      - '%kernel.project_dir%'
      - '%dades_scheduled_task_bundle.fileLog%'

  dades_scheduled_task_bundle.console_command_service:
    class: '%dades_scheduled_task_bundle.console_command_service.class%'
    arguments:
      - '@doctrine.orm.entity_manager'
      - '@dades_scheduled_task_bundle.scheduled_command_repository'
      - '%dades_scheduled_task_bundle.scheduled_command_type.console%'

  dades_scheduled_task_bundle.symfony_command_service:
    class: '%dades_scheduled_task_bundle.symfony_command_service.class%'
    arguments:
      - '@doctrine.orm.entity_manager'
      - '@dades_scheduled_task_bundle.scheduled_command_repository'
      - '%kernel.project_dir%'
      - '%dades_scheduled_task_bundle.scheduled_command_type.symfony%'

  # Command
  dades_scheduled_task_bundle.run_command:
    class: '%dades_scheduled_task_bundle.run_command.class%'
    arguments:
      - '%kernel.project_dir%'
      - '%dades_scheduled_task_bundle.fileLog%'
      - ['@dades_scheduled_task_bundle.console_command_service', '@dades_scheduled_task_bundle.symfony_command_service']
    tags: ['console.command']

  # Repository
  dades_scheduled_task_bundle.scheduled_command_repository:
    class: '%dades_scheduled_task_bundle.scheduled_command_repository.class%'
